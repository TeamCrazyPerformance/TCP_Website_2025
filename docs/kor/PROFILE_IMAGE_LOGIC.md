# 프로필 이미지 로직

이 문서는 사용자 프로필 이미지 처리 로직, 특히 기본 이미지의 자동 할당 및 업데이트에 대해 설명합니다.

## 1. 기본 이미지 유형
시스템은 사용자 역할과 상태에 따라 세 가지 유형의 기본 이미지를 사용합니다:
- **관리자 이미지**: `default_admin_profile_image.webp` (`ADMIN` 역할용)
- **졸업생 이미지**: `default_graduate_profile_image.webp` (`GRADUATE` 상태용)
- **일반 이미지**: `default_profile_image.webp` (기타 모든 사용자용)

## 2. 우선순위 규칙
기본 이미지를 결정할 때 시스템은 다음의 엄격한 우선순위를 따릅니다:

1.  **사용자 지정 이미지**: 사용자가 직접 업로드한 이미지가 있는 경우, **항상** 유지되며 시스템에 의해 자동으로 변경되지 않습니다.
2.  **관리자 역할**: 사용자가 `ADMIN`인 경우, 학적 상태와 관계없이 관리자 기본 이미지를 받습니다 (예: 관리자이면서 졸업생인 경우에도 관리자 이미지가 표시됨).
3.  **졸업 상태**: 사용자가 관리자가 아니지만 `GRADUATE` 상태인 경우, 졸업생 기본 이미지를 받습니다.
4.  **일반 상태**: 그 외 모든 사용자는 일반 기본 이미지를 받습니다.

## 3. 자동 업데이트 트리거
기본 프로필 이미지는 사용자가 현재 기본 이미지 중 하나를 사용하고 있는 경우에 **한해서** 다음 시나리오에서 자동으로 업데이트됩니다:

### A. 역할 변경 (관리자 패널)
- **트리거**: 관리자가 `AdminMembersService`를 통해 사용자의 역할을 변경할 때.
- **로직**:
    - 역할이 `ADMIN`이 되면 → `default_admin_profile_image.webp`로 업데이트.
    - 역할이 `MEMBER`가 되면 (관리자에서 변경 시) → 학적 상태(졸업 vs. 일반)를 확인하고 그에 따라 업데이트.

### B. 학적 상태 변경 (사용자 프로필 & 관리자 패널)
- **트리거**: 사용자가 자신의 프로필을 업데이트하거나 (`ProfileService`) 관리자가 사용자 프로필을 업데이트할 때 (`AdminMembersService`).
- **로직**:
    - 상태가 `GRADUATE`가 되면 → `default_graduate_profile_image.webp`로 업데이트 (사용자가 관리자가 아닌 경우에 한함).
    - 상태가 `ENROLLED/LEAVE`가 되면 → `default_profile_image.webp`로 업데이트 (사용자가 관리자가 아닌 경우에 한함).

## 4. 이미지 초기화
- **트리거**: 사용자가 "프로필 이미지 초기화"를 클릭할 때.
- **로직**: 이미지가 위의 우선순위 규칙에 따라 사용자의 *현재* 역할과 상태에 맞는 적절한 기본 이미지로 즉시 설정됩니다.
